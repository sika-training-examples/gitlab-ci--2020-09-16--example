image: ondrejsika/ci

stages:
    - build

build:
    image: golang:1.14
    stage: build
    script:
        - go build hello.go
    artifacts:
        path:
            - hello

docker build:
    stage: build
    script:
        - docker login $CI_REGISTRY -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD
        - docker build -t $CI_REGISTRY_IMAGE .
        - docker push $CI_REGISTRY_IMAGE
